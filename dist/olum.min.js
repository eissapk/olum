/**
* @name olum
* @version 0.2.4
* @copyright 2021
* @author Eissa Saber
* @license MIT
*/
!function(e,t){"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Olum=t()}("undefined"!=typeof self?self:this,function(){"use strict";var m="undefined"!=typeof self?self:this,n="Olum [warn]:",o=!1;function t(e){return null!==e&&"object"==typeof e}function f(e){return t(e)&&Array.isArray(e)&&e.length}function u(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function d(e,t){t="err"==(t=null==t?"log":t)?"error":t,o&&(Array.isArray(e)?console[t].apply(console,e):console[t](e))}return String.prototype.cap=function(){return this.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},function e(t){if(!(this instanceof e))throw new Error("can't invoke 'Olum' without 'new' keyword");var c=null,p=null,o=null,s=t&&t.prefix?t.prefix:null;function r(e){var a=[];return function e(t){if(t.hasOwnProperty("components")&&f(t.components))for(var n=0;n<t.components.length;n++){var o=t.components[n],r=Object.keys(o)[0],l={};u(l,"parent",t.name),u(l,"child",{}),u(l.child,"name",r),r=new o[r],u(l.child,"olumCompData",r.olumCompData()),a.push(l),l.hasOwnProperty("child")&&l.child.hasOwnProperty("olumCompData")&&e(l.child.olumCompData)}}(e),a}function l(e){var t="olum_style_tag",n=document.getElementById(t);n||((n=document.createElement("style")).id=t,document.head.append(n)),n.innerHTML=e+"\n [to] * {pointer-events: none;}"}function a(e){var t=e.entry,n=e.compsArr,o=t.template||"",r=t.style||"",l={};if(t.render&&(l[0]=t.render),f(n))for(var a=0;a<n.length;a++){var i=(c=n[a].child.olumCompData).template||"",m=c.style||"",u=c.render||null,c=s?s+"-"+c.name:c.name,c=new RegExp("<("+c+"\\s{0,})\\/>","gi"),o=o.replace(c,i);r+=m,null!==u&&(l[a+1]=u)}return{template:o,style:r,script:l}}function i(e,t){for(var n=/(olum-component=[\"\']([^\"|\']*)[\"\'])|(olum-component)/gi,o=/<[a-z]+(>|.*?[^?]>)/gi,r=/\>/gi,l=Array.from(t),e=e,a=0;a<l.length;a++){var i,m,u=l[a].child.olumCompData.name||"undefined";l[a].child&&l[a].child.olumCompData&&l[a].child.olumCompData.hasOwnProperty("template")&&((i=l[a].child.olumCompData).template=i.template.replace(n,""),f(m=i.template.match(o))&&(i.template=i.template.replace(m[0],m[0].replace(r," olum-component='"+u+"'>"))))}return e.template&&(u=e.name||"undefined",e.template=e.template.replace(n,""),f(m=e.template.match(o))&&(e.template=e.template.replace(m[0],m[0].replace(r," olum-component='"+u+"' olum-view='"+u+"'>")))),c.setAttribute("olum-component",p),{entry:e,compsArr:l}}this.use=function(e){if(!e)throw new Error(n+" Missing component or router @use()");if(!(o=e.name&&"function"==typeof e.name&&"OlumRouter"===e.name()?{type:"router",cb:e}:{type:"component",cb:e}))throw new Error(n+" Root component or router are not defined!");!function(){if(!c)throw new Error(n+" Root Element is not found in DOM!");!function(){if(d({mount:"mount()",rootElm:c,which:o}),!(o&&o.type&&o.cb))throw new Error(n+" Can't mount, Missing component or router @use()");"router"===o.type?function(){d("use OlumRouter");var e=o.cb;e.__proto__.rootElm=c,e.__proto__.buildStyles=l,e.__proto__.buildTree=r,e.__proto__.labelView=i,e.__proto__.merge=a,e.isReady&&e.listen()}():"component"===o.type&&function(){d("use component");var e=(new o.cb).olumCompData(),t=r(e),n=a(-1!==["localhost","127.0.0.1"].indexOf(m.location.hostname)?i(e,t):{entry:e,compsArr:t});l(n.style),c.innerHTML=n.template,setTimeout(function(){for(var e in n.script)n.script[e]()},0)}()}()}()},this.$=function(e){if(!e)throw new Error(n+" Root Element is not found in DOM!");var t;return-1!==e.indexOf(".")?t=".":-1!==e.indexOf("#")&&(t="#"),e=e.replace(/\#|\./,""),p=e.cap(),c="."===t?document.getElementsByClassName(e)[0]:"#"===t?document.getElementById(e):document.getElementsByTagName(e)[0],this}}});